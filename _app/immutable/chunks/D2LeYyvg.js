const l="https://cms.punk.dev",u="b0f9c47c0c8f536c631b29bad1";class g{constructor(){this.baseUrl=`${l}/ghost/api/content`,this.key=u}async makeRequest(e,s={}){const n=new URL(`${this.baseUrl}${e}`);n.searchParams.append("key",this.key),Object.entries(s).forEach(([a,r])=>{r!=null&&n.searchParams.append(a,r)});try{const a=await fetch(n.toString(),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!a.ok)throw new Error(`Ghost API error: ${a.status} ${a.statusText}`);return await a.json()}catch(a){throw console.error("Ghost API request failed:",a),a}}async getPosts(e={}){const s={include:"tags,authors",formats:"html,plaintext",limit:"all",...e};return(await this.makeRequest("/posts/",s)).posts||[]}async getPostBySlug(e){return(await this.makeRequest(`/posts/slug/${e}/`,{include:"tags,authors",formats:"html,plaintext"})).posts?.[0]||null}async getPages(e={}){const s={include:"tags",formats:"html,plaintext",limit:"all",...e};return(await this.makeRequest("/pages/",s)).pages||[]}async getPageBySlug(e){return(await this.makeRequest(`/pages/slug/${e}/`,{include:"tags",formats:"html,plaintext"})).pages?.[0]||null}async getPagesByTag(e,s={}){return await this.getPages({filter:`tag:${e}`,...s})}async getSettings(){return(await this.makeRequest("/settings/")).settings||{}}}const c=new g;async function p(t){try{switch(t){case"log":return(await c.getPosts()).map(h);case"products":return(await c.getPagesByTag("product")).map(m);default:return[]}}catch(e){return console.error(`Failed to get content from ${t}:`,e),[]}}function h(t){return{slug:t.slug,title:t.title,date:t.published_at,excerpt:t.excerpt,featuredImage:t.feature_image,tags:t.tags?.map(e=>e.name)||[],content:t.html,plaintext:t.plaintext,Content:i(t.html)}}function m(t){return{slug:t.slug,title:t.title,excerpt:t.excerpt,featuredImage:t.feature_image,tags:t.tags?.map(e=>e.name)||[],content:t.html,plaintext:t.plaintext,Content:i(t.html),price:o(t,"price"),category:o(t,"category"),shopifyLink:o(t,"shopify-link"),featured:t.featured||!1}}function i(t){return function(s){s.out+=`<div class="ghost-content">${t}</div>`}}function o(t,e){const s=t.tags?.find(n=>n.name.startsWith(`${e}:`));return s?s.name.split(":")[1]:""}export{p as g};
