const u="https://cms.punk.dev",g="b0f9c47c0c8f536c631b29bad1";class h{constructor(){this.baseUrl=`${u}/ghost/api/content`,this.key=g}async makeRequest(e,s={}){const a=new URL(`${this.baseUrl}${e}`);a.searchParams.append("key",this.key),Object.entries(s).forEach(([n,r])=>{r!=null&&a.searchParams.append(n,r)});try{const n=await fetch(a.toString(),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!n.ok)throw new Error(`Ghost API error: ${n.status} ${n.statusText}`);return await n.json()}catch(n){throw console.error("Ghost API request failed:",n),n}}async getPosts(e={}){const s={include:"tags,authors",formats:"html,plaintext",limit:"all",...e};return(await this.makeRequest("/posts/",s)).posts||[]}async getPostBySlug(e){return(await this.makeRequest(`/posts/slug/${e}/`,{include:"tags,authors",formats:"html,plaintext"})).posts?.[0]||null}async getPages(e={}){const s={include:"tags",formats:"html,plaintext",limit:"all",...e};return(await this.makeRequest("/pages/",s)).pages||[]}async getPageBySlug(e){return(await this.makeRequest(`/pages/slug/${e}/`,{include:"tags",formats:"html,plaintext"})).pages?.[0]||null}async getPagesByTag(e,s={}){return await this.getPages({filter:`tag:${e}`,...s})}async getSettings(){return(await this.makeRequest("/settings/")).settings||{}}}const o=new h;async function p(t){try{switch(t){case"log":return(await o.getPosts()).map(m);case"products":return(await o.getPagesByTag("product")).map(i);case"branches":return(await o.getPagesByTag("branch")).map(i);default:return[]}}catch(e){return console.error(`Failed to get content from ${t}:`,e),[]}}function m(t){return{slug:t.slug,title:t.title,date:t.published_at,excerpt:t.excerpt,featuredImage:t.feature_image,tags:t.tags?.map(e=>e.name)||[],content:t.html,plaintext:t.plaintext,Content:l(t.html)}}function i(t){return{slug:t.slug,title:t.title,excerpt:t.excerpt,featuredImage:t.feature_image,tags:t.tags?.map(e=>e.name)||[],content:t.html,plaintext:t.plaintext,Content:l(t.html),price:c(t,"price"),category:c(t,"category"),shopifyLink:c(t,"shopify-link"),featured:t.featured||!1}}function l(t){return function(s){s.out+=`<div class="ghost-content">${t}</div>`}}function c(t,e){const s=t.tags?.find(a=>a.name.startsWith(`${e}:`));return s?s.name.split(":")[1]:""}export{p as g};
